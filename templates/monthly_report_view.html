{% extends "base.html" %}
{% block content %}
<h2>Relatório Mensal #{{ report.id }}</h2>
<p>Mês/Ano: {{ report.report_month }}/{{ report.report_year }}</p>
<p>Gerado em: {{ report.generated_date }}</p>

<h3>Comissões Incluídas</h3>
<table border="1" cellpadding="5" cellspacing="0">
  <thead>
    <tr>
      <th>ID</th>
      <th>Nome</th> <!-- NOVO: Adicionamos a coluna Nome -->
      <th>Mês/Ano</th>
      <th>Valor Original</th>
      <th>Fator</th>
      <th>Valor Computado</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody>
  {% for c in commissions_data %}
    <tr>
      <td>{{ c.id }}</td>
      <td>{{ c.name }}</td>  <!-- Exibe nome/descrição da comissão -->
      <td>{{ c.month }}/{{ c.year }}</td>
      <td>{{ c.original_value }}</td>
      <td>{{ c.factor }}</td>
      <td>{{ c.computed_value }}</td>
      <td>{{ c.status }}</td>
    </tr>
  {% endfor %}
  </tbody>
</table>
<p><strong>Total de Comissões:</strong> R$ {{ report.total_commissions }}</p>

<h3>Despesas Incluídas</h3>
<table border="1" cellpadding="5" cellspacing="0">
  <thead>
    <tr>
      <th>ID</th>
      <th>Nome</th>
      <th>Valor</th>
      <th>Mês</th>
      <th>Ano</th>
      <th>Recorrente?</th>
    </tr>
  </thead>
  <tbody>
  {% for e in expenses_data %}
    <tr>
      <td>{{ e.id }}</td>
      <td>{{ e.name }}</td>
      <td>{{ e.value }}</td>
      <td>{{ e.month }}</td>
      <td>{{ e.year }}</td>
      <td>{{ 'Sim' if e.is_recurring else 'Não' }}</td>
    </tr>
  {% endfor %}
  </tbody>
</table>
<p><strong>Total de Despesas:</strong> R$ {{ report.total_expenses }}</p>

<hr>
<h3>Valor Final (Comissões - Despesas): R$ {{ report.grand_total }}</h3>

<a href="{{ url_for('dashboard') }}">Voltar ao Dashboard</a>
{% endblock %}
